{% extends 'chat/base.html' %}

{% block title %}Delete {{ dataset.name }} - OpenMind{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
    <div class="bg-white rounded-xl shadow-lg border border-red-200 overflow-hidden">
        <div class="bg-red-600 text-white p-6">
            <h1 class="text-2xl font-bold">
                <i class="fas fa-exclamation-triangle mr-2"></i>Delete Dataset
            </h1>
        </div>
        <div class="p-8 text-center">
            <div class="mb-6">
                <i class="fas fa-trash text-6xl text-red-500 mb-4"></i>
                <h2 class="text-xl font-semibold text-red-600">Are you sure you want to delete this dataset?</h2>
            </div>
            
            <div class="bg-yellow-50 border border-yellow-200 text-yellow-800 rounded-lg p-4 mb-6 text-left">
                <div class="grid grid-cols-1 gap-2">
                    <div><span class="font-semibold">Dataset:</span> {{ dataset.name }}</div>
                    <div><span class="font-semibold">Description:</span> {{ dataset.description|truncatewords:20 }}</div>
                    <div><span class="font-semibold">File Size:</span> {{ dataset.get_file_size_mb }} MB</div>
                    <div><span class="font-semibold">Rows:</span> {{ dataset.row_count|default:0 }}</div>
                    <div><span class="font-semibold">Columns:</span> {{ dataset.column_count|default:0 }}</div>
                </div>
            </div>
            
            <div class="bg-red-50 border border-red-200 text-red-800 rounded-lg p-4 mb-8">
                <i class="fas fa-exclamation-circle mr-2"></i>
                <span class="font-semibold">Warning:</span> This action cannot be undone. All data, metadata, and access logs will be permanently deleted.
            </div>
            
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <form method="post" class="inline">
                    {% csrf_token %}
                    <button type="submit" class="inline-flex items-center px-6 py-3 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition-colors">
                        <i class="fas fa-trash mr-2"></i>Yes, Delete Dataset
                    </button>
                </form>
                
                <a href="{% url 'chat:dataset_detail' dataset.id %}" class="inline-flex items-center px-6 py-3 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-700 transition-colors">
                    <i class="fas fa-times mr-2"></i>Cancel
                </a>
            </div>
        </div>
    </div>
    
    <!-- Dataset Info Card -->
    <div class="bg-white rounded-xl shadow-lg p-6 mt-6">
        <h2 class="text-xl font-semibold mb-6">
            <i class="fas fa-info-circle mr-2 text-blue-500"></i>Dataset Information
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="space-y-2">
                <div><span class="font-semibold text-gray-700">Owner:</span> <span class="text-gray-600">{{ dataset.owner.get_full_name|default:dataset.owner.username }}</span></div>
                <div><span class="font-semibold text-gray-700">Created:</span> <span class="text-gray-600">{{ dataset.created_at|date:"M d, Y H:i" }}</span></div>
                <div><span class="font-semibold text-gray-700">Last Updated:</span> <span class="text-gray-600">{{ dataset.updated_at|date:"M d, Y H:i" }}</span></div>
            </div>
            <div class="space-y-2">
                <div><span class="font-semibold text-gray-700">Type:</span> <span class="text-gray-600">{{ dataset.get_dataset_type_display }}</span></div>
                <div>
                    <span class="font-semibold text-gray-700">Status:</span> 
                    <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full {% if dataset.status == 'active' %}bg-green-100 text-green-800{% elif dataset.status == 'processing' %}bg-yellow-100 text-yellow-800{% else %}bg-red-100 text-red-800{% endif %}">
                        {{ dataset.get_status_display }}
                    </span>
                </div>
                <div>
                    <span class="font-semibold text-gray-700">Public:</span> 
                    <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full {% if dataset.is_public %}bg-blue-100 text-blue-800{% else %}bg-yellow-100 text-yellow-800{% endif %}">
                        {% if dataset.is_public %}Yes{% else %}No{% endif %}
                    </span>
                </div>
            </div>
        </div>
        
        {% if dataset.tags %}
        <div class="mt-4">
            <span class="font-semibold text-gray-700">Tags:</span>
            <div class="flex flex-wrap gap-2 mt-2">
                {% for tag in dataset.get_tags_list %}
                    <span class="px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded">{{ tag }}</span>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </div>
    
    <!-- Navigation -->
    <div class="text-center mt-6">
        <div class="inline-flex space-x-4">
            <a href="{% url 'chat:dataset_list' %}" class="inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors">
                <i class="fas fa-arrow-left mr-2"></i>Back to Datasets
            </a>
            <a href="{% url 'chat:dashboard' %}" class="inline-flex items-center px-4 py-2 border border-blue-600 text-blue-600 font-medium rounded-lg hover:bg-blue-50 transition-colors">
                <i class="fas fa-tachometer-alt mr-2"></i>Dashboard
            </a>
        </div>
    </div>
</div>
{% endblock %}
